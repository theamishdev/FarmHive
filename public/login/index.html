<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>FarmHive Login</title>

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: #0d0d0d;
        color: #fff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      /* ===============================
         TYPING AREA
      =============================== */
      .typing-text {
        font-size: 42px;
        font-weight: 700;
        color: #ffc107;
        letter-spacing: 2px;
        margin-bottom: 25px;
        height: 55px;
        white-space: nowrap;
        border-right: 3px solid #ffc107;
        padding-right: 6px;
        overflow: hidden;
        text-shadow: 0 0 12px rgba(255, 193, 7, 0.7);
      }

      @keyframes blinkCursor {
        0% {
          border-color: #ffc107;
        }
        50% {
          border-color: transparent;
        }
        100% {
          border-color: #ffc107;
        }
      }

      /* ===============================
         GLASS LOGIN FORM
      =============================== */
      .login-container {
        width: 360px;
        background: rgba(255, 255, 255, 0.06);
        backdrop-filter: blur(12px);
        border-radius: 14px;
        padding: 35px;
        border: 1px solid rgba(255, 193, 7, 0.35);
        box-shadow: 0 0 25px rgba(255, 193, 7, 0.35);
      }

      h2 {
        text-align: center;
        font-weight: 600;
        color: #ffc107;
        margin-bottom: 22px;
      }

      input {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        background: rgba(0, 0, 0, 0.55);
        border: 1px solid rgba(255, 193, 7, 0.35);
        border-radius: 8px;
        color: #fff;
        font-size: 15px;
        transition: 0.3s;
      }

      input:focus {
        border-color: #ffc107;
        box-shadow: 0 0 12px rgba(255, 193, 7, 0.6);
      }

      button {
        width: 100%;
        padding: 12px;
        background: #ffc107;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        margin-top: 12px;
        transition: 0.3s;
      }

      button:hover {
        background: #e5ac05;
      }

      .extra-links {
        text-align: center;
        margin-top: 15px;
        font-size: 14px;
      }

      .extra-links a {
        color: #ffc107;
        text-decoration: none;
      }

      .extra-links a:hover {
        text-decoration: underline;
      }
      /*Back to home button css */
     .back-home-wrapper {
  display: flex;
  justify-content: center;
  margin-top: 15px;
}

.back-home-btn {
  width: 140px;  /* Smaller than form */
  padding: 10px;
  background: transparent;
  border: 2px solid #ffc107;
  color: #ffc107;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: 0.3s ease;
  font-weight: 600;
  backdrop-filter: blur(4px);
}

.back-home-btn:hover {
  background: #ffc107;
  color: #000;
  box-shadow: 0 0 12px rgba(255, 193, 7, 0.7);
}

    </style>

    <script type="module" src="script.js">
  
</script>


  </head>

  <body>
    <!-- Typing Animation -->
    <div class="typing-text" id="typing"></div>

    <!-- Login Form -->
    <div class="login-container">
      <h2>Login</h2>

      <form id="loginForm">
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Email Address"
        />
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Password"
        />
        <button type="submit" >Login</button>
        <button type="submit" id="googleBtn" >Login with Google</button>
      </form>
      <div class="extra-links">
        <p><a href="#">Forgot Password?</a></p>
        <p>Don't have an account? <a href="#">Register</a></p>
      </div>
            <!-- Back to Home Button (Below Form) -->
      <div class="back-home-wrapper">
        <button class="back-home-btn" onclick="window.location.href='/'">
          ⬅ Back to Home
        </button>
      </div>
    </div>

    <!-- Typing Effect + Login Script -->
    <script>
      const text = "FarmHive";
      let index = 0;
      let isDeleting = false;
      const speed = 120;

      function typeEffect() {
        const el = document.getElementById("typing");

        if (!isDeleting) {
          el.textContent = text.substring(0, index + 1);
          index++;

          if (index === text.length) {
            isDeleting = true;
            setTimeout(typeEffect, 1000);
            return;
          }
        } else {
          el.textContent = text.substring(0, index - 1);
          index--;

          if (index === 0) {
            isDeleting = false;
            setTimeout(typeEffect, 600);
            return;
          }
        }

        setTimeout(typeEffect, speed);
      }

      typeEffect();

      /* =====================================================
                     LOGIN FORM HANDLER
      ===================================================== */

      const form = document.getElementById("loginForm");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();

        try {
          const res = await fetch("http://localhost:5001/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password }),
          });

          const data = await res.json();

          if (!res.ok) {
            alert("⚠️ " + (data.errors?.[0]?.msg || data.message));
            return;
          }

          alert("✅ Login Successful");
        } catch (err) {
          alert("❌ Network Error: " + err.message);
        }
      });
    </script>
  </body>
</html>
